{"ast":null,"code":"// import fetch from \"cross-fetch\";\nimport ActionTypes from \"../constants/ActionTypes\";\n\nfunction requestSports() {\n  return {\n    type: ActionTypes.REQUEST_SPORTS\n  };\n}\n\nfunction receiveSports(json) {\n  return {\n    type: ActionTypes.RECEIVE_SPORTS,\n    sports: json\n  };\n}\n\nexport function fetchSports() {\n  return dispatch => {\n    dispatch(requestSports());\n    return run_ajax(\"http://localhost:3000/sports.json\", \"GET\", {}, json => {\n      console.log(json);\n      dispatch(receiveSports(json));\n    });\n  };\n} // return run_ajax(\n//   \"http://www.localhost:3000/sports.json\",\n//   \"GET\",\n//   {},\n//   (json) => dispatch(receiveSports(json))\n// );\n\nfunction run_ajax(link, method = \"GET\", data = {}, callback = () => {\n  this.getObjects();\n}) {\n  let options;\n\n  if (method === \"GET\") {\n    options = {\n      method: \"GET\",\n      mode: 'no-cors'\n    };\n  } else {\n    options = {\n      method: method,\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"http://localhost:4200\"\n      },\n      credentials: \"same-origin\"\n    };\n  }\n\n  fetch(link, options).then(response => {\n    if (!response.ok) {\n      throw response;\n    }\n\n    console.log(response.json());\n    return response.json();\n  }).then(result => {\n    callback(result);\n  }).catch(error => {\n    if (error.statusText) {\n      this.setState({\n        error: error\n      });\n    }\n\n    callback(error);\n  });\n}","map":{"version":3,"sources":["/Users/jeffreyigims/Documents/survey/src/actions/Actions.js"],"names":["ActionTypes","requestSports","type","REQUEST_SPORTS","receiveSports","json","RECEIVE_SPORTS","sports","fetchSports","dispatch","run_ajax","console","log","link","method","data","callback","getObjects","options","mode","body","JSON","stringify","headers","credentials","fetch","then","response","ok","result","catch","error","statusText","setState"],"mappings":"AAAA;AACA,OAAOA,WAAP,MAAwB,0BAAxB;;AAEA,SAASC,aAAT,GAAyB;AACvB,SAAO;AACLC,IAAAA,IAAI,EAAEF,WAAW,CAACG;AADb,GAAP;AAGD;;AAED,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAC3B,SAAO;AACLH,IAAAA,IAAI,EAAEF,WAAW,CAACM,cADb;AAELC,IAAAA,MAAM,EAAEF;AAFH,GAAP;AAID;;AAED,OAAO,SAASG,WAAT,GAAuB;AAC5B,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACR,aAAa,EAAd,CAAR;AACA,WAAOS,QAAQ,CAAC,mCAAD,EAAsC,KAAtC,EAA6C,EAA7C,EAAkDL,IAAD,IAAU;AAACM,MAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACzEI,MAAAA,QAAQ,CAACL,aAAa,CAACC,IAAD,CAAd,CAAR;AAA8B,KADjB,CAAf;AAGD,GALD;AAMD,C,CAED;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASK,QAAT,CACEG,IADF,EAEEC,MAAM,GAAG,KAFX,EAGEC,IAAI,GAAG,EAHT,EAIEC,QAAQ,GAAG,MAAM;AACf,OAAKC,UAAL;AACD,CANH,EAOE;AACA,MAAIC,OAAJ;;AACA,MAAIJ,MAAM,KAAK,KAAf,EAAsB;AACpBI,IAAAA,OAAO,GAAG;AACRJ,MAAAA,MAAM,EAAE,KADA;AAERK,MAAAA,IAAI,EAAE;AAFE,KAAV;AAKD,GAND,MAMO;AACLD,IAAAA,OAAO,GAAG;AACRJ,MAAAA,MAAM,EAAEA,MADA;AAERM,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAFE;AAGRQ,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,uCAA+B;AAFxB,OAHD;AAORC,MAAAA,WAAW,EAAE;AAPL,KAAV;AASD;;AAEDC,EAAAA,KAAK,CAACZ,IAAD,EAAOK,OAAP,CAAL,CACGQ,IADH,CACSC,QAAD,IAAc;AAClB,QAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,YAAMD,QAAN;AACD;;AACDhB,IAAAA,OAAO,CAACC,GAAR,CAAYe,QAAQ,CAACtB,IAAT,EAAZ;AACA,WAAOsB,QAAQ,CAACtB,IAAT,EAAP;AACD,GAPH,EAQGqB,IARH,CAQSG,MAAD,IAAY;AAChBb,IAAAA,QAAQ,CAACa,MAAD,CAAR;AACD,GAVH,EAWGC,KAXH,CAWUC,KAAD,IAAW;AAChB,QAAIA,KAAK,CAACC,UAAV,EAAsB;AACpB,WAAKC,QAAL,CAAc;AAAEF,QAAAA,KAAK,EAAEA;AAAT,OAAd;AACD;;AACDf,IAAAA,QAAQ,CAACe,KAAD,CAAR;AACD,GAhBH;AAiBD","sourcesContent":["// import fetch from \"cross-fetch\";\nimport ActionTypes from \"../constants/ActionTypes\";\n\nfunction requestSports() {\n  return {\n    type: ActionTypes.REQUEST_SPORTS,\n  };\n}\n\nfunction receiveSports(json) {\n  return {\n    type: ActionTypes.RECEIVE_SPORTS,\n    sports: json,\n  };\n}\n\nexport function fetchSports() {\n  return (dispatch) => {\n    dispatch(requestSports());\n    return run_ajax(\"http://localhost:3000/sports.json\", \"GET\", {}, (json) => {console.log(json);\n      dispatch(receiveSports(json))}\n    );\n  };\n}\n\n// return run_ajax(\n//   \"http://www.localhost:3000/sports.json\",\n//   \"GET\",\n//   {},\n//   (json) => dispatch(receiveSports(json))\n// );\n\nfunction run_ajax(\n  link,\n  method = \"GET\",\n  data = {},\n  callback = () => {\n    this.getObjects();\n  }\n) {\n  let options;\n  if (method === \"GET\") {\n    options = {\n      method: \"GET\",\n      mode: 'no-cors',\n\n    };\n  } else {\n    options = {\n      method: method,\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"http://localhost:4200\",\n      },\n      credentials: \"same-origin\",\n    };\n  }\n\n  fetch(link, options)\n    .then((response) => {\n      if (!response.ok) {\n        throw response;\n      }\n      console.log(response.json());\n      return response.json();\n    })\n    .then((result) => {\n      callback(result);\n    })\n    .catch((error) => {\n      if (error.statusText) {\n        this.setState({ error: error });\n      }\n      callback(error);\n    });\n}\n"]},"metadata":{},"sourceType":"module"}