{"ast":null,"code":"/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule FluxStoreGroup\n * \n */\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\n\nvar invariant = require('fbjs/lib/invariant');\n/**\n * FluxStoreGroup allows you to execute a callback on every dispatch after\n * waiting for each of the given stores.\n */\n\n\nvar FluxStoreGroup = function () {\n  function FluxStoreGroup(stores, callback) {\n    var _this = this;\n\n    _classCallCheck(this, FluxStoreGroup);\n\n    this._dispatcher = _getUniformDispatcher(stores); // Precompute store tokens.\n\n    var storeTokens = stores.map(function (store) {\n      return store.getDispatchToken();\n    }); // Register with the dispatcher.\n\n    this._dispatchToken = this._dispatcher.register(function (payload) {\n      _this._dispatcher.waitFor(storeTokens);\n\n      callback();\n    });\n  }\n\n  FluxStoreGroup.prototype.release = function release() {\n    this._dispatcher.unregister(this._dispatchToken);\n  };\n\n  return FluxStoreGroup;\n}();\n\nfunction _getUniformDispatcher(stores) {\n  !(stores && stores.length) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Must provide at least one store to FluxStoreGroup') : invariant(false) : undefined;\n  var dispatcher = stores[0].getDispatcher();\n\n  if (process.env.NODE_ENV !== 'production') {\n    for (var _iterator = stores, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var store = _ref;\n      !(store.getDispatcher() === dispatcher) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'All stores in a FluxStoreGroup must use the same dispatcher') : invariant(false) : undefined;\n    }\n  }\n\n  return dispatcher;\n}\n\nmodule.exports = FluxStoreGroup;","map":{"version":3,"sources":["/Users/jeffreyigims/Documents/survey/node_modules/flux/lib/FluxStoreGroup.js"],"names":["_classCallCheck","instance","Constructor","TypeError","invariant","require","FluxStoreGroup","stores","callback","_this","_dispatcher","_getUniformDispatcher","storeTokens","map","store","getDispatchToken","_dispatchToken","register","payload","waitFor","prototype","release","unregister","length","process","env","NODE_ENV","undefined","dispatcher","getDispatcher","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","value","module","exports"],"mappings":"AAAA;;;;;;;;;;;AAYA;;AAEA,SAASA,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,IAAIC,SAAS,GAAGC,OAAO,CAAC,oBAAD,CAAvB;AAEA;;;;;;AAKA,IAAIC,cAAc,GAAI,YAAY;AAChC,WAASA,cAAT,CAAwBC,MAAxB,EAAgCC,QAAhC,EAA0C;AACxC,QAAIC,KAAK,GAAG,IAAZ;;AAEAT,IAAAA,eAAe,CAAC,IAAD,EAAOM,cAAP,CAAf;;AAEA,SAAKI,WAAL,GAAmBC,qBAAqB,CAACJ,MAAD,CAAxC,CALwC,CAOxC;;AACA,QAAIK,WAAW,GAAGL,MAAM,CAACM,GAAP,CAAW,UAAUC,KAAV,EAAiB;AAC5C,aAAOA,KAAK,CAACC,gBAAN,EAAP;AACD,KAFiB,CAAlB,CARwC,CAYxC;;AACA,SAAKC,cAAL,GAAsB,KAAKN,WAAL,CAAiBO,QAAjB,CAA0B,UAAUC,OAAV,EAAmB;AACjET,MAAAA,KAAK,CAACC,WAAN,CAAkBS,OAAlB,CAA0BP,WAA1B;;AACAJ,MAAAA,QAAQ;AACT,KAHqB,CAAtB;AAID;;AAEDF,EAAAA,cAAc,CAACc,SAAf,CAAyBC,OAAzB,GAAmC,SAASA,OAAT,GAAmB;AACpD,SAAKX,WAAL,CAAiBY,UAAjB,CAA4B,KAAKN,cAAjC;AACD,GAFD;;AAIA,SAAOV,cAAP;AACD,CAzBoB,EAArB;;AA2BA,SAASK,qBAAT,CAA+BJ,MAA/B,EAAuC;AACrC,IAAEA,MAAM,IAAIA,MAAM,CAACgB,MAAnB,IAA6BC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCtB,SAAS,CAAC,KAAD,EAAQ,mDAAR,CAAjD,GAAgHA,SAAS,CAAC,KAAD,CAAtJ,GAAgKuB,SAAhK;AACA,MAAIC,UAAU,GAAGrB,MAAM,CAAC,CAAD,CAAN,CAAUsB,aAAV,EAAjB;;AACA,MAAIL,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,SAAK,IAAII,SAAS,GAAGvB,MAAhB,EAAwBwB,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAcH,SAAd,CAAnC,EAA6DI,EAAE,GAAG,CAAlE,EAAqEJ,SAAS,GAAGC,QAAQ,GAAGD,SAAH,GAAeA,SAAS,CAACK,MAAM,CAACC,QAAR,CAAT,EAA7G,IAA6I;AAC3I,UAAIC,IAAJ;;AAEA,UAAIN,QAAJ,EAAc;AACZ,YAAIG,EAAE,IAAIJ,SAAS,CAACP,MAApB,EAA4B;AAC5Bc,QAAAA,IAAI,GAAGP,SAAS,CAACI,EAAE,EAAH,CAAhB;AACD,OAHD,MAGO;AACLA,QAAAA,EAAE,GAAGJ,SAAS,CAACQ,IAAV,EAAL;AACA,YAAIJ,EAAE,CAACK,IAAP,EAAa;AACbF,QAAAA,IAAI,GAAGH,EAAE,CAACM,KAAV;AACD;;AAED,UAAI1B,KAAK,GAAGuB,IAAZ;AAEA,QAAEvB,KAAK,CAACe,aAAN,OAA0BD,UAA5B,IAA0CJ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCtB,SAAS,CAAC,KAAD,EAAQ,6DAAR,CAAjD,GAA0HA,SAAS,CAAC,KAAD,CAA7K,GAAuLuB,SAAvL;AACD;AACF;;AACD,SAAOC,UAAP;AACD;;AAEDa,MAAM,CAACC,OAAP,GAAiBpC,cAAjB","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule FluxStoreGroup\n * \n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\n/**\n * FluxStoreGroup allows you to execute a callback on every dispatch after\n * waiting for each of the given stores.\n */\n\nvar FluxStoreGroup = (function () {\n  function FluxStoreGroup(stores, callback) {\n    var _this = this;\n\n    _classCallCheck(this, FluxStoreGroup);\n\n    this._dispatcher = _getUniformDispatcher(stores);\n\n    // Precompute store tokens.\n    var storeTokens = stores.map(function (store) {\n      return store.getDispatchToken();\n    });\n\n    // Register with the dispatcher.\n    this._dispatchToken = this._dispatcher.register(function (payload) {\n      _this._dispatcher.waitFor(storeTokens);\n      callback();\n    });\n  }\n\n  FluxStoreGroup.prototype.release = function release() {\n    this._dispatcher.unregister(this._dispatchToken);\n  };\n\n  return FluxStoreGroup;\n})();\n\nfunction _getUniformDispatcher(stores) {\n  !(stores && stores.length) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Must provide at least one store to FluxStoreGroup') : invariant(false) : undefined;\n  var dispatcher = stores[0].getDispatcher();\n  if (process.env.NODE_ENV !== 'production') {\n    for (var _iterator = stores, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var store = _ref;\n\n      !(store.getDispatcher() === dispatcher) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'All stores in a FluxStoreGroup must use the same dispatcher') : invariant(false) : undefined;\n    }\n  }\n  return dispatcher;\n}\n\nmodule.exports = FluxStoreGroup;"]},"metadata":{},"sourceType":"script"}